jQuery(function(e){var t={init:function(){t.masks(),t.generateQrCode(),e(document.body).on("updated_checkout",function(){t.masks(),t.generateQrCode()}).trigger("updated_checkout")},masks:function(){e.each(appmax_payments_pix_params.masks,function(t,a){e("."+t).mask(a)})},formatDate:function(e){return e.split(":").map(e=>(e<10&&(e="0"+e),e)).join(":")},generateQrCode:function(){if(document.getElementById("pix-order-id")){const a=appmax_payments_pix_params.key,n=appmax_payments_pix_params.cluster,o=new Pusher(a,{cluster:n,encrypted:!0});o.logToConsole=0;const r=document.getElementById("pix-order-id").value,i=o.subscribe(`pix.notification.${r}`),p=document.getElementById("wrapper");window.localStorage[`${r}`]&&(p.innerHTML="<h2>"+appmax_payments_pix_params.payment_confirmed+"</h2>");const c=document.getElementById("pix_emv"),d=document.getElementById("get-qrcode"),m=document.getElementById("countdown");if(e("#get-qrcode").on("click",function(e){e.preventDefault(),c.select(),navigator.clipboard.writeText(c.value),d.classList.add("disabled"),d.textContent=appmax_payments_pix_params.copy_code}),!window.localStorage[`${r}`]){const e=document.getElementById("expiration_date").value;let a=new Date(e).getTime();const n=setInterval(function(){let e=(new Date).getTime(),o=a-e,r=Math.floor(o%864e5/36e5),i=Math.floor(o%36e5/6e4),p=Math.floor(o%6e4/1e3);m.innerHTML=t.formatDate(`${r}:${i}:${p}`),o<0&&(clearInterval(n),document.getElementById("wrapper").innerHTML="<h2>"+appmax_payments_pix_params.expired_time+"</h2>")},1e3)}const s=document.getElementById("wp_order_id").value;i.bind("pix.order-paid",function(t){window.localStorage[`${r}`]=!0,p.innerHTML="<h2>"+appmax_payments_pix_params.payment_confirmed+"</h2>",e.ajax({type:"POST",dataType:"json",url:woocommerce_params.ajax_url,data:{action:"update_order_status",order_id:s},success:function(e){console.log(e)}})})}}};t.init()});